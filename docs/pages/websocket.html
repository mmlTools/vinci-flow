<h2>Overview</h2>
<p>
  <code>vinci-flow</code> exposes a Vendor API via <b>obs-websocket</b>.
  This allows external tools (bots, stream decks, custom apps) to list, create, clone, delete, and toggle lower thirds, plus subscribe to plugin events.
</p>

<div class="callout warn">
  <b>Vendor name</b>
  <div style="margin-top:6px; color: rgba(255,255,255,.82);">
    Vendor ID: <code>vinci-flow</code><br/>
    Requests and events are registered under this vendor.
  </div>
</div>

<h2>Requests</h2>
<p>These vendor requests are implemented:</p>

<pre><code>ListLowerThirds
GetVisible
SetVisible
ToggleVisible
CreateLowerThird
CloneLowerThird
DeleteLowerThird
ReloadFromDisk
</code></pre>

<h3>Request payloads</h3>

<p><b>SetVisible</b></p>
<pre><code>{
  "requestType": "CallVendorRequest",
  "requestData": {
    "vendorName": "vinci-flow",
    "requestType": "SetVisible",
    "requestData": {
      "id": "your_lower_third_id",
      "visible": true
    }
  }
}
</code></pre>

<p><b>ToggleVisible</b></p>
<pre><code>{
  "vendorName": "vinci-flow",
  "requestType": "ToggleVisible",
  "requestData": {
    "id": "your_lower_third_id"
  }
}
</code></pre>

<p><b>CloneLowerThird</b></p>
<pre><code>{
  "vendorName": "vinci-flow",
  "requestType": "CloneLowerThird",
  "requestData": {
    "id": "existing_id"
  }
}
</code></pre>

<div class="callout">
  <b>ID sanitization</b>
  <p>
    The plugin sanitizes IDs server-side to <code>[A-Za-z0-9_-]</code>. If you send an invalid ID, the request will fail with <code>Invalid id</code>.
  </p>
</div>

<h2>Events</h2>
<p>The vendor emits these events:</p>

<pre><code>LowerThirdsVisibilityChanged
LowerThirdsListChanged
LowerThirdsReloaded
</code></pre>

<h3>Event schemas</h3>

<p><b>LowerThirdsVisibilityChanged</b></p>
<pre><code>{
  "id": "lt_id",
  "visible": true,
  "visibleIds": [{"id":"lt_id"}, ...]
}
</code></pre>

<p><b>LowerThirdsListChanged</b></p>
<pre><code>{
  "reason": "create|clone|delete|reload|update",
  "id": "optional",
  "id2": "optional",
  "count": 4
}
</code></pre>

<p><b>LowerThirdsReloaded</b></p>
<pre><code>{
  "ok": true,
  "count": 4
}
</code></pre>

<h2>Recommended automation patterns</h2>
<ul>
  <li><b>Synchronize UIs</b>: call <code>ListLowerThirds</code>, then subscribe to list/visibility events to keep your UI updated.</li>
  <li><b>One-button scenes</b>: use <code>SetVisible</code> with <code>visible: true</code> at scene start, and <code>visible: false</code> at scene end.</li>
  <li><b>Resilience</b>: after file edits, call <code>ReloadFromDisk</code> and listen for <code>LowerThirdsReloaded</code>.</li>
</ul>
